"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[808],{6808:(V,h,r)=>{r.r(h),r.d(h,{StoreModule:()=>J});var p=r(1368),f=r(422),_=r(1528),t=r(4496),v=r(6576),C=r(616),x=r(4060),b=r(1872),y=r(9288),S=r(860);function k(e,a){if(1&e&&(t.I0R(0,"div"),t.wR5(1,"img",5),t.C$Y()),2&e){const n=t.GaO(2);t.yG2(),t.E7m("src",n.item.image,t.K6U)("alt",n.item.name)}}function P(e,a){1&e&&t.wR5(0,"img",6)}const I=e=>({background:e,"border-radius":"10px"});function O(e,a){if(1&e){const n=t.KQA();t.I0R(0,"div",1)(1,"div")(2,"h3"),t.OEk(3),t.C$Y()(),t.I0R(4,"div")(5,"p"),t.OEk(6),t.C$Y()(),t.yuY(7,k,2,2,"div")(8,P,1,0),t.I0R(9,"div")(10,"p",2)(11,"strong"),t.OEk(12),t.wVc(13,"currency"),t.C$Y()()(),t.I0R(14,"div",2)(15,"button",3),t.qCj("click",function(){t.usT(n);const i=t.GaO();return t.CGJ(i.removeItem())}),t.OEk(16,"-"),t.C$Y(),t.I0R(17,"span"),t.OEk(18),t.C$Y(),t.I0R(19,"button",4),t.qCj("click",function(){t.usT(n);const i=t.GaO();return t.CGJ(i.addItem())}),t.OEk(20,"+"),t.C$Y()()()}if(2&e){const n=t.GaO();t.E7m("ngStyle",t.S45(8,I,n.color)),t.yG2(3),t.cNF(n.item.name),t.yG2(3),t.cNF(n.item.description),t.yG2(),t.C0Y(7,n.item.image?7:8),t.yG2(5),t.cNF(t.kDX(13,6,n.item.price)),t.yG2(6),t.cNF(n.cantidad)}}let R=(()=>{var e;class a{constructor(){this.cantidad=0,this.color="aliceblue",this.carritoService=(0,t.uUt)(S.S)}ngOnInit(){this.getColor()}addItem(){console.log("additem"),this.cantidad++,this.carritoService.addItem(this.item)}removeItem(){this.carritoService.removeItem(this.item),this.cantidad>0&&this.cantidad--}getColor(){this.color=0==this.item.stock?"#fde2e2":this.item.stock<5?"aliceblue":"#dfe7d6"}}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.In1({type:e,selectors:[["app-product-detail"]],inputs:{item:"item"},decls:1,vars:1,consts:[["class","content-item",3,"ngStyle"],[1,"content-item",3,"ngStyle"],[2,"text-align","end"],[1,"button-remove",3,"click"],[1,"button-add",3,"click"],[3,"src","alt"],["src","/assets/images/default.webp"]],template:function(o,i){1&o&&t.yuY(0,O,21,10,"div",0),2&o&&t.C0Y(0,i.item?0:-1)},dependencies:[p.Qt,p.cf],styles:[".content-item[_ngcontent-%COMP%]{margin:10px;padding:10px;border:1px solid black}.button-remove[_ngcontent-%COMP%]{background:#ef6b6b;color:#fff;width:25px;height:25px;border:1px solid #607D8B;margin-right:10px}.button-add[_ngcontent-%COMP%]{background:#adff2f;color:#fff;width:25px;height:25px;border:1px solid #607D8B;margin-left:10px}"]}),a})();const G=e=>({"categoria-selected":e});function D(e,a){if(1&e){const n=t.KQA();t.I0R(0,"button",3),t.qCj("click",function(){const u=t.usT(n).$implicit,m=t.GaO();return t.CGJ(m.getProductsByCategoria(u.id))}),t.OEk(1),t.C$Y()}if(2&e){const n=a.$implicit,o=t.GaO();t.E7m("ngClass",t.S45(2,G,n.id==o.categoriaSelected)),t.yG2(),t.cNF(n.name)}}function Y(e,a){1&e&&t.wR5(0,"app-product-detail",5),2&e&&t.E7m("item",a.$implicit)}function E(e,a){1&e&&(t.I0R(0,"p"),t.OEk(1,"no hay articulos "),t.C$Y())}function M(e,a){if(1&e){const n=t.KQA();t.I0R(0,"div",1)(1,"button",6),t.qCj("click",function(){t.usT(n);const i=t.GaO(2);return t.CGJ(i.getProductsByCategoria())}),t.OEk(2,"m\xe1s"),t.C$Y()()}}function T(e,a){if(1&e&&(t.c53(0,Y,1,1,"app-product-detail",5,t.wJt,!1,E,2,0,"p"),t.yuY(3,M,3,0,"div",4)),2&e){const n=t.GaO();t.oho(n.items),t.yG2(3),t.C0Y(3,n.enableMore?3:-1)}}function $(e,a){1&e&&(t.I0R(0,"p",1),t.OEk(1,"cargando..."),t.C$Y())}let F=(()=>{var e;class a{constructor(){this.tituloPagina="Tienda",this.firestoreService=(0,t.uUt)(v.Y),this.cargando=!0,this.categorias=[{name:"Fast Food",id:"fastfood"},{name:"Drinks",id:"Drinks"},{name:"Seafood",id:"Seafood"}],this.categoriaSelected="fastfood",this.enableMore=!0,this.getProductsByCategoria()}ngOnInit(){}loadItems(){setTimeout(()=>{this.items=q,this.cargando=!1},2e3)}consultar(){var o=this;return(0,_.c)(function*(){console.log("consultar()");const i="Products";let u;u=[["enable","==",!0]];const m={orderParam:"date",directionSort:"asc",limit:2};if(o.items){const s=o.items[o.items.length-1],l=yield o.firestoreService.getDocument(`${i}/${s.id}`);m.startAfter=l}o.firestoreService.getDocumentsQueryChanges(i,u,m).subscribe(s=>{console.log("res -> ",s),o.items?s.forEach(l=>{const c=o.items.findIndex(d=>d.id===l.id);c>=0?o.items[c]=l:o.items.push(l)}):o.items=s,o.cargando=!1})})()}getProductsByCategoria(o=this.categoriaSelected){var i=this;return(0,_.c)(function*(){i.categoriaSelected!=o&&(i.items=null,i.cargando=!0,i.enableMore=!0),i.categoriaSelected=o,console.log("getProductsByCategoria -> ",o);const u="Products";let s;s=[["categories","array-contains",o]];const l={limit:2};if(i.items){const c=i.items[i.items.length-1],d=yield i.firestoreService.getDocument(`${u}/${c.id}`);l.startAfter=d}i.firestoreService.getDocumentsQueryChanges(u,s,l).subscribe(c=>{console.log("res -> ",c),c.length&&(c.length<2&&(i.enableMore=!1),i.items?c.forEach(d=>{if(d.categories.find(g=>i.categoriaSelected==g)){const g=i.items.findIndex(A=>A.id===d.id);g>=0?i.items[g]=d:i.items.push(d)}}):i.items=c),i.cargando=!1})})()}}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.In1({type:e,selectors:[["app-store"]],decls:11,vars:2,consts:[[3,"titulo"],[2,"text-align","center"],[2,"margin","60px"],[1,"categoria",3,"ngClass","click"],["style","text-align:center"],[3,"item"],[1,"more",3,"click"],["class","categoria",3,"ngClass"]],template:function(o,i){1&o&&(t.I0R(0,"ion-content"),t.wR5(1,"app-header",0)(2,"app-detail-carrito"),t.I0R(3,"div",1),t.c53(4,D,2,4,"button",7,t.wJt),t.C$Y(),t.yuY(6,T,4,2)(7,$,2,0),t.wR5(8,"div",2)(9,"div",2)(10,"app-footer"),t.C$Y()),2&o&&(t.yG2(),t.E7m("titulo",i.tituloPagina),t.yG2(3),t.oho(i.categorias),t.yG2(2),t.C0Y(6,i.cargando?7:6))},dependencies:[p.QF,C._i,x.W,b.k,y.M,R],styles:[".content-carrito[_ngcontent-%COMP%]{display:flex;position:sticky;top:60px;justify-content:end}.detalle-carrito[_ngcontent-%COMP%]{background:#ffc107;padding:10px;border-radius:5px;margin-right:10px}.more[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background:#7fffd4;font-weight:700}.categoria[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background:#f0f8ff;font-weight:700}.categoria-selected[_ngcontent-%COMP%]{background:#7fffd4}"]}),a})();const q=[{id:"0001",name:"Hamburguesa",description:"Con queso, salsas, papas",price:7.5,image:"/assets/images/hamburguesa.webp",stock:0,categories:[],enable:!0},{id:"0002",name:"Hamburguesa Especial",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Vero maxime asperiores ex quia, nostrum laboriosam recusandae ea eaque explicabo cupiditate iure quo omnis aliquid beatae soluta odit aliquam. Velit, voluptate.",price:9.5,stock:0,categories:[],enable:!0},{id:"0003",name:"Hamburguesa Doble",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Vero maxime asperiores ex quia, nostrum laboriosam recusandae ea eaque explicabo cupiditate iure quo omnis aliquid beatae soluta odit aliquam. Velit, voluptate.",price:11.5,image:"/assets/images/hamburguesa.webp",stock:10,categories:[],enable:!0}],Q=()=>["/store/home"],j=[{path:"home",component:F},{path:"item",component:(()=>{var e;class a{constructor(){}ngOnInit(){}}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.In1({type:e,selectors:[["app-product"]],decls:7,vars:2,consts:[[1,"back",3,"routerLink"]],template:function(o,i){1&o&&(t.I0R(0,"ion-content"),t.wR5(1,"app-header"),t.I0R(2,"button",0),t.OEk(3,"back"),t.C$Y(),t.I0R(4,"h1"),t.OEk(5,"Product"),t.C$Y(),t.wR5(6,"app-footer"),t.C$Y()),2&o&&(t.yG2(2),t.E7m("routerLink",t.q4q(1,Q)))},dependencies:[f.ER,C._i,x.W,b.k],styles:["button[_ngcontent-%COMP%]{margin:10px;padding:10px}"]}),a})()}];let w=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.a4G({type:e}),e.\u0275inj=t.s3X({imports:[f.qQ.forChild(j),f.qQ]}),a})();var B=r(9280);let J=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.a4G({type:e}),e.\u0275inj=t.s3X({imports:[p.MD,w,C._i,B.k]}),a})()}}]);